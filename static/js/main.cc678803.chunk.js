(this["webpackJsonpestate-test"]=this["webpackJsonpestate-test"]||[]).push([[0],{19:function(e,t,a){e.exports=a(30)},24:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(17),c=a.n(r),i=a(6),o=(a(24),a(1)),l=s.a.memo((function(){return s.a.createElement("div",{className:"container"},s.a.createElement("h1",{className:"header__title "},"\u041d\u0435\u0434\u0432\u0438\u0436\u0438\u043c\u043e\u0441\u0442\u044c \u0432\xa0\u0422\u044e\u043c\u0435\u043d\u0438"),s.a.createElement("p",{className:"header__subtitle"},"\u0431\u0435\u0437 \u043a\u043e\u043c\u0438\u0441\u0441\u0438\u0438 Apple"))})),u=s.a.memo((function(){return s.a.createElement("header",{className:"header page__header"},s.a.createElement(o.c,null,s.a.createElement(o.a,{exact:!0,path:"/"},s.a.createElement(l,null)),s.a.createElement(o.a,{path:"*"},s.a.createElement(i.b,{to:"/",className:"link-wrapper"},s.a.createElement(l,null)))))})),m=a(7);var d=function(e){var t=e.isLiked,a=e.onClick;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 169.32 237.04",className:+t?"card__like-button card__like-button_liked":"card__like-button",onClick:a},s.a.createElement("title",null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u043c"),s.a.createElement("path",{d:"M0 0v228.56c0 3.36 1.85 6.28 4.92 7.69 3.07 1.41 6.47.94 9.04-1.25l70.7-60.41 70.7 60.41c2.57 2.2 5.97 2.66 9.04 1.25 3.07-1.41 4.92-4.31 4.92-7.69V0H0z"}))},_=[{type:"house",id:12,attributes:{title:"\u041a\u0443\u043f\u0435\u0447\u0435\u0441\u043a\u0430\u044f \u0443\u0441\u0430\u0434\u044c\u0431\u0430 \u0448\u0438\u043a\u0430\u0440\u043d\u0430\u044f, \u0447\u0442\u043e \u0433\u043b\u0430\u0437 \u043d\u0435\u043b\u044c\u0437\u044f \u043e\u0442\u0432\u0435\u0441\u0442\u044c",rooms:6,address:{city:"Tyumen",street:"\u041b\u0435\u043d\u0438\u043d\u0430",house:"134"},area:257,unit:"\u043a\u0432\u043c"},relationships:{type:"owner",id:44,attributes:{first_name:"\u0421\u0442\u0435\u043f\u0430\u043d",last_name:"\u041a\u0430\u0440\u0430\u0447\u0430\u0435\u0432",middle_name:"\u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447"}}},{type:"studio",id:16,attributes:{title:"\u041b\u043e\u0444\u0442",rooms:1,address:{city:"Tyumen",street:"\u041b\u0435\u043d\u0438\u043d\u0430",house:"134",room:"24"},area:134,unit:"\u043a\u0432\u043c"},relationships:{type:"agent",id:44,attributes:{first_name:"\u0421\u0442\u0435\u043f\u0430\u043d"}}},{type:"flat",id:1,attributes:{title:"3-\u0445 \u043a\u043e\u043c\u043d\u0430\u0442\u043d\u0430\u044f \u043d\u0430 \u041c\u0438\u043d\u0441\u043a\u043e\u0439",rooms:3,address:{city:"Tyumen",street:"\u041c\u0438\u043d\u0441\u043a\u0430\u044f",house:"3a",room:"123"},area:134,unit:"\u043a\u0432\u043c"},relationships:{type:"agent",id:2,attributes:{first_name:"\u0412\u0430\u0441\u0438\u043b\u0438\u0439",last_name:"\u0414\u0440\u043e\u0437\u0434\u043e\u0432",middle_name:"\u041c\u0438\u0445\u0430\u0439\u043b\u043e\u0432\u0438\u0447"}}},{type:"flat",id:2,attributes:{title:"1 \u043a\u043e\u043c\u043d\u0430\u0442\u043d\u0430\u044f \u043d\u0430 \u0411\u0430\u0440\u0430\u0431\u0430\u0438\u043d\u0441\u043a\u043e\u0439",rooms:2,address:{city:"Tyumen",street:"\u0411\u0430\u0440\u0430\u0431\u0438\u043d\u0441\u043a\u0430\u044f",house:"12",room:"45"},area:34,unit:"\u043a\u0432\u043c"},relationships:{type:"agent",id:10,attributes:{first_name:"\u041c\u0438\u0445\u0430\u0438\u043b",last_name:"\u0418\u0432\u0430\u043d\u043e\u0432",middle_name:"\u0414\u0435\u043c\u0438\u0434\u043e\u0432\u0438\u0447"}}},{type:"flat",id:3,attributes:{title:"\u041a\u0432\u0430\u0440\u0442\u0438\u0440\u0430 \u041b\u0435\u043d\u0438\u043d\u0430",rooms:4,address:{city:"Tyumen",street:"\u041b\u0435\u043d\u0438\u043d\u0430",house:"134",room:"24"},area:134,unit:"\u043a\u0432\u043c"},relationships:{type:"agent",id:44,attributes:{first_name:"\u0421\u0442\u0435\u043f\u0430\u043d",last_name:"\u041a\u0430\u0440\u0430\u0447\u0430\u0435\u0432",middle_name:"\u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447"}}}],p={type:{flat:"\u043a\u0432\u0430\u0440\u0442\u0438\u0440\u0430",studio:"\u0441\u0442\u0443\u0434\u0438\u044f",apartments:"\u0430\u043f\u0430\u0440\u0442\u0430\u043c\u0435\u043d\u0442\u044b",house:"\u0434\u043e\u043c",townhouse:"\u0442\u0430\u0443\u043d\u0445\u0430\u0443\u0441",cottage:"\u043a\u043e\u0442\u0442\u0435\u0434\u0436"},agent:{agent:"\u0440\u0438\u0435\u043b\u0442\u043e\u0440",owner:"\u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446"},unit:{"\u043a\u0432\u043c":["\u043c",2]}};function h(e){console.error(e)}var E={"\u043a\u043e\u043c\u043d\u0430\u0442\u0430":["\u043a\u043e\u043c\u043d\u0430\u0442\u044b","\u043a\u043e\u043c\u043d\u0430\u0442"]};var f=a(10),v=a(11),y={ok:!0,status:200,statusText:"OK"},k={ok:!0,status:201,statusText:"Created"},b={ok:!0,status:204,statusText:"No content"},N={ok:!1,status:400,statusText:"Bad request"},g=function(){function e(t){var a=t.ok,n=t.status,s=t.statusText,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(f.a)(this,e),this.delay=1e3,this._object=r,this.ok=a,this.status=n,this.statusText=s,this.ok&&(this.json=this._json)}return Object(v.a)(e,[{key:"_json",value:function(){var e=this;return new Promise((function(t){setTimeout((function(){return t(e._object)}),e.delay)}))}}]),e}();var w=new(function(){function e(t){Object(f.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}return Object(v.a)(e,[{key:"_request",value:function(e,t,a){t||(t="GET");var n={method:t,headers:this._headers};return a&&Object.assign(n,{body:JSON.stringify(a)}),function(e,t){var a,n=e.split("/"),s=n.slice(n.indexOf("v1")+1),r=Object(m.a)(s,3),c=r[0],i=r[1],o=r[2];switch(c){case"flats":void 0===i&&(a=new g(y,{response:_})),"likes"===i&&("PUT"===t.method&&(a=new g(k,{response:{id:o,liked:!0}})),"DELETE"===t.method&&(a=new g(b,{response:{id:o,liked:!1}})))}return a||(a=new g(N)),new Promise((function(e){setTimeout((function(){return e(a)}),1e3)}))}(this._baseUrl+e,n).then((function(e){return e.ok?e.json():Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status," (").concat(e.statusText,")")))}))}},{key:"getFlats",value:function(){return this._request("/flats")}},{key:"setFlatLikedStatus",value:function(e,t){return t?this._request("/flats/likes/".concat(e),"PUT"):this._request("/flats/likes/".concat(e),"DELETE")}}]),e}())({baseUrl:"https://estate.ru/api/v1",headers:{authorization:"let's suppose we already have token","Content-Type":"application/json"}}),T=s.a.memo((function(e){var t=e.card,a=t.type,n=t.attributes,r=n.title,c=n.rooms,o=n.address,l=n.area,u=n.unit,_=t.relationships,f=_.type,v=_.id,y=_.attributes,k=t.id,b=p.unit[u]&&(Array.isArray(p.unit[u])?" "+p.unit[u][0]:" "+p.unit[u])||"",N=b&&Array.isArray(p.unit[u])?p.unit[u][1]:"",g=s.a.useState(!1),T=Object(m.a)(g,2),j=T[0],x=T[1],O=s.a.useState(!1),L=Object(m.a)(O,2),A=L[0],S=L[1];return s.a.createElement("article",{className:A?"card card_hovered":"card"},s.a.createElement("div",{className:"card__top-block card__section"},s.a.createElement("p",{className:"card__tag card__tag_top"},p.type[a]),s.a.createElement(d,{isLiked:j,onClick:function(){x(!j),w.setFlatLikedStatus(k,!j).then((function(e){x(e.response.liked)})).catch((function(e){return h(e)}))}})),s.a.createElement(i.b,{className:"link-wrapper card__link-wrapper  card__section",to:"/flats/".concat(k),onMouseLeave:function(){S(!1)},onMouseOver:function(){S(!0)}},s.a.createElement("h2",{className:"card__title"},r),s.a.createElement("p",{className:"card__info"},"".concat(c," ").concat(function(e,t){var a=function(e){return(e%=100)>9&&e<21?1:1===(e%=10)?-1:e<5?0:1}(t);return a<0?e:E[e]&&E[e][a]}("\u043a\u043e\u043c\u043d\u0430\u0442\u0430",c)),s.a.createElement("span",{className:"card__divider"},"|"),"".concat(l).concat(b),N&&s.a.createElement("sup",null,N)),s.a.createElement("p",{className:"card__text"},function(e){var t=[];return e.street&&t.push("\u0443\u043b. ".concat(e.street)),e.house&&t.push("\u0434. ".concat(e.house)),e.room&&t.push("\u043a\u0432. ".concat(e.room)),t.join(", ")}(o))),s.a.createElement("div",{className:"card__section"},s.a.createElement("p",{className:"card__tag"},p.agent[f]),s.a.createElement(i.b,{to:"/users/".concat(v),className:"card__text card__text_type_link"},function(e){var t=[];return e.first_name&&t.push(e.first_name),e.middle_name&&t.push(e.middle_name),e.last_name&&t.push(e.last_name[0]+"."),t.join(" ")}(y))))})),j=s.a.memo((function(e){var t=e.caption,a=void 0===t?"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430":t,n=e.showLink,r=void 0===n||n,c=e.children;return s.a.createElement("section",{className:"section section_type_cap"},s.a.createElement("h2",{className:"section__cap"},a),c,r&&s.a.createElement(i.b,{className:"section__link",to:"/"},"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"))}));var x=function(){var e=s.a.useState(),t=Object(m.a)(e,2),a=t[0],n=t[1];return s.a.useEffect((function(){w.getFlats().then((function(e){return n(e.response)})).catch((function(e){h(e),n(0)}))}),[]),a?s.a.createElement("section",{className:"cards section page__section"},s.a.createElement("ul",{className:"cards__list"},a.map((function(e){return s.a.createElement("li",{className:"cards__list-item",key:e.id},s.a.createElement(T,{card:e}))})))):Array.isArray(a)?s.a.createElement(j,{caption:"\u041a\u0432\u0430\u0440\u0442\u0438\u0440 \u043d\u0435\u0442 :(",showLink:!1}):0===a?s.a.createElement(j,{caption:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(",showLink:!1},s.a.createElement("p",{className:"section__subtitle"},"\u041c\u044b \u0443\u0436\u0435 \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0435\u043c\u0441\u044f.")):s.a.createElement("section",{className:"cards section page__section"},s.a.createElement("ul",{className:"cards__list"},s.a.createElement("li",{className:"cards__list-item"},s.a.createElement("div",{className:"card card_type_cap cards__loading"})),s.a.createElement("li",{className:"cards__list-item"},s.a.createElement("div",{className:"card card_type_cap cards__loading"})),s.a.createElement("li",{className:"cards__list-item"},s.a.createElement("div",{className:"card card_type_cap cards__loading"}))))},O=s.a.memo((function(){return s.a.createElement("main",{className:"container"},s.a.createElement(o.c,null,s.a.createElement(o.a,{exact:!0,path:"/"},s.a.createElement(x,null)),s.a.createElement(o.a,{path:"/flats/:id"},s.a.createElement(j,{caption:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435"})),s.a.createElement(o.a,{path:"/users/:id"},s.a.createElement(j,{caption:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435"})),s.a.createElement(o.a,{path:"*"},s.a.createElement(j,null))))}));var L=function(){var e=(new Date).getFullYear(),t=e-2020?"\u2014".concat(e):"";return s.a.createElement("footer",{className:"footer page__footer container"},"\xa9 2020".concat(t))};var A=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(u,null),s.a.createElement(O,null),s.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(i.a,{basename:"/estate-test"},s.a.createElement(A,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.cc678803.chunk.js.map