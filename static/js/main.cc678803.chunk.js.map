{"version":3,"sources":["components/Header.js","components/BookmarkIcon.js","utils/utils.js","utils/morphology.js","utils/pseudoServer.js","utils/api.js","components/Card.js","components/CapPage.js","components/Flats.js","components/Main.js","components/Footer.js","components/App.js","serviceWorker.js","index.js"],"names":["HeaderInner","React","memo","className","Header","exact","path","to","BookmarkIcon","isLiked","onClick","xmlns","viewBox","d","flats","type","id","attributes","title","rooms","address","city","street","house","area","unit","relationships","first_name","last_name","middle_name","room","dict","flat","studio","apartments","townhouse","cottage","agent","owner","квм","handleError","error","console","morpho","комната","response","ok","status","statusText","PseudoResponse","object","delay","this","_object","json","_json","Promise","resolve","setTimeout","api","options","_baseUrl","baseUrl","_headers","headers","tag","method","body","Object","assign","JSON","stringify","url","result","split","slice","indexOf","resource","attribute","undefined","liked","fetch","then","reject","Error","_request","flatId","authorization","Card","card","agentId","name","dictUnit","Array","isArray","dimension","useState","setIsLiked","isHovered","setIsHovered","setFlatLikedStatus","data","catch","e","onMouseLeave","onMouseOver","word","amount","index","getFormIndex","getWordForm","res","push","join","getAddresString","getNameString","CapPage","caption","showLink","children","Flats","setFlats","useEffect","getFlats","map","key","Main","Footer","year","Date","getFullYear","App","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","basename","process","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.cc678803.chunk.js","sourcesContent":["import React from 'react';\nimport { Link, Route, Switch } from 'react-router-dom';\n\nconst HeaderInner = React.memo(() => {\n  return (\n    <div className=\"container\">\n      <h1 className=\"header__title \">Недвижимость в&nbsp;Тюмени</h1>\n      <p className=\"header__subtitle\">без комиссии Apple</p>\n    </div>\n  );\n});\n\nconst Header = React.memo(() => {\n  return (\n    <header className=\"header page__header\">\n      <Switch>\n        <Route exact path=\"/\">\n          <HeaderInner />\n        </Route>\n        <Route path=\"*\">\n          <Link to=\"/\" className=\"link-wrapper\">\n            <HeaderInner />\n          </Link>\n        </Route>\n      </Switch>\n    </header>\n  );\n});\n\nexport default Header;\n","import React from 'react';\n\nfunction BookmarkIcon({ isLiked, onClick }) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 169.32 237.04\"\n      className={\n        +isLiked\n          ? 'card__like-button card__like-button_liked'\n          : 'card__like-button'\n      }\n      onClick={onClick}\n    >\n      <title>Сохранить в избранном</title>\n      <path d=\"M0 0v228.56c0 3.36 1.85 6.28 4.92 7.69 3.07 1.41 6.47.94 9.04-1.25l70.7-60.41 70.7 60.41c2.57 2.2 5.97 2.66 9.04 1.25 3.07-1.41 4.92-4.31 4.92-7.69V0H0z\" />\n    </svg>\n  );\n}\n\nexport default BookmarkIcon;\n","const flats = [\n  {\n    type: 'house',\n    id: 12,\n    attributes: {\n      title: 'Купеческая усадьба шикарная, что глаз нельзя отвесть',\n      rooms: 6,\n      address: {\n        city: 'Tyumen',\n        street: 'Ленина',\n        house: '134',\n      },\n      area: 257,\n      unit: 'квм',\n    },\n    relationships: {\n      type: 'owner',\n      id: 44,\n      attributes: {\n        first_name: 'Степан',\n        last_name: 'Карачаев',\n        middle_name: 'Иванович',\n      },\n    },\n  },\n  {\n    type: 'studio',\n    id: 16,\n    attributes: {\n      title: 'Лофт',\n      rooms: 1,\n      address: {\n        city: 'Tyumen',\n        street: 'Ленина',\n        house: '134',\n        room: '24',\n      },\n      area: 134,\n      unit: 'квм',\n    },\n    relationships: {\n      type: 'agent',\n      id: 44,\n      attributes: {\n        first_name: 'Степан',\n      },\n    },\n  },\n  {\n    type: 'flat',\n    id: 1,\n    attributes: {\n      title: '3-х комнатная на Минской',\n      rooms: 3,\n      address: {\n        city: 'Tyumen',\n        street: 'Минская',\n        house: '3a',\n        room: '123',\n      },\n      area: 134,\n      unit: 'квм',\n    },\n    relationships: {\n      type: 'agent',\n      id: 2,\n      attributes: {\n        first_name: 'Василий',\n        last_name: 'Дроздов',\n        middle_name: 'Михайлович',\n      },\n    },\n  },\n  {\n    type: 'flat',\n    id: 2,\n    attributes: {\n      title: '1 комнатная на Барабаинской',\n      rooms: 2,\n      address: {\n        city: 'Tyumen',\n        street: 'Барабинская',\n        house: '12',\n        room: '45',\n      },\n      area: 34,\n      unit: 'квм',\n    },\n    relationships: {\n      type: 'agent',\n      id: 10,\n      attributes: {\n        first_name: 'Михаил',\n        last_name: 'Иванов',\n        middle_name: 'Демидович',\n      },\n    },\n  },\n  {\n    type: 'flat',\n    id: 3,\n    attributes: {\n      title: 'Квартира Ленина',\n      rooms: 4,\n      address: {\n        city: 'Tyumen',\n        street: 'Ленина',\n        house: '134',\n        room: '24',\n      },\n      area: 134,\n      unit: 'квм',\n    },\n    relationships: {\n      type: 'agent',\n      id: 44,\n      attributes: {\n        first_name: 'Степан',\n        last_name: 'Карачаев',\n        middle_name: 'Иванович',\n      },\n    },\n  },\n];\n\nconst dict = {\n  type: {\n    flat: 'квартира',\n    studio: 'студия',\n    apartments: 'апартаменты',\n    house: 'дом',\n    townhouse: 'таунхаус',\n    cottage: 'коттедж',\n  },\n  agent: { agent: 'риелтор', owner: 'владелец' },\n  unit: { квм: ['м', 2] },\n};\n\nexport { flats, dict };\n\nexport function getAddresString(data) {\n  const res = [];\n  data.street && res.push(`ул. ${data.street}`);\n  data.house && res.push(`д. ${data.house}`);\n  data.room && res.push(`кв. ${data.room}`);\n  return res.join(', ');\n}\n\nexport function getNameString(data) {\n  const res = [];\n  data.first_name && res.push(data.first_name);\n  data.middle_name && res.push(data.middle_name);\n  data.last_name && res.push(data.last_name[0] + '.');\n  return res.join(' ');\n}\n\nexport function handleError(error) {\n  console.error(error);\n}\n","const morpho = {\n  комната: ['комнаты', 'комнат'],\n};\n\nfunction getFormIndex(amount) {\n  amount %= 100;\n  if (amount > 9 && amount < 21) {\n    return 1;\n  }\n  amount %= 10;\n  if (amount === 1) {\n    return -1;\n  }\n  if (amount < 5) {\n    return 0;\n  }\n  return 1;\n}\n\nexport default function getWordForm(word, amount) {\n  const index = getFormIndex(amount);\n  if (index < 0) {\n    return word;\n  }\n  return morpho[word] && morpho[word][index];\n}\n","import { flats } from './utils';\n\nconst response = {\n  status200: { ok: true, status: 200, statusText: 'OK' },\n  status201: { ok: true, status: 201, statusText: 'Created' },\n  status204: { ok: true, status: 204, statusText: 'No content' },\n  status400: { ok: false, status: 400, statusText: 'Bad request' },\n};\n\nconst serverDelay = 1000;\n\nclass PseudoResponse {\n  delay = serverDelay;\n  constructor({ ok, status, statusText }, object = {}) {\n    this._object = object;\n    this.ok = ok;\n    this.status = status;\n    this.statusText = statusText;\n    if (this.ok) {\n      this.json = this._json;\n    }\n  }\n\n  _json() {\n    return new Promise((resolve) => {\n      setTimeout(() => resolve(this._object), this.delay);\n    });\n  }\n}\n\nexport default function fetch(url, options) {\n  let path = url.split('/');\n\n  const [resource, attribute, id] = path.slice(path.indexOf('v1') + 1);\n  let result;\n\n  switch (resource) {\n    case 'flats': {\n      if (attribute === undefined) {\n        result = new PseudoResponse(response.status200, { response: flats });\n      }\n\n      if (attribute === 'likes') {\n        if (options.method === 'PUT') {\n          result = new PseudoResponse(response.status201, {\n            response: { id: id, liked: true },\n          });\n        }\n        if (options.method === 'DELETE') {\n          result = new PseudoResponse(response.status204, {\n            response: { id: id, liked: false },\n          });\n        }\n      }\n\n      break;\n    }\n    default: {\n      break;\n    }\n  }\n\n  if (!result) {\n    result = new PseudoResponse(response.status400);\n  }\n\n  return new Promise((resolve) => {\n    setTimeout(() => resolve(result), serverDelay);\n  });\n}\n","import fetch from './pseudoServer';\n\nconst apiOptions = {\n  baseUrl: 'https://estate.ru/api/v1',\n  headers: {\n    authorization: \"let's suppose we already have token\",\n    'Content-Type': 'application/json',\n  },\n};\n\nclass Api {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  _request(tag, method, body) {\n    if (!method) {\n      method = 'GET';\n    }\n    const options = { method: method, headers: this._headers };\n    if (body) {\n      Object.assign(options, { body: JSON.stringify(body) });\n    }\n    return fetch(this._baseUrl + tag, options).then((response) => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        return Promise.reject(\n          new Error(`Ошибка: ${response.status} (${response.statusText})`)\n        );\n      }\n    });\n  }\n\n  getFlats() {\n    return this._request('/flats');\n  }\n\n  setFlatLikedStatus(flatId, status) {\n    if (status) {\n      return this._request(`/flats/likes/${flatId}`, 'PUT');\n    } else {\n      return this._request(`/flats/likes/${flatId}`, 'DELETE');\n    }\n  }\n}\n\nconst api = new Api(apiOptions);\n\nexport default api;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport BookmarkIcon from './BookmarkIcon';\nimport { dict, getAddresString, getNameString } from '../utils/utils';\nimport getWordForm from '../utils/morphology';\nimport api from '../utils/api';\nimport { handleError } from '../utils/utils';\n\nconst Card = React.memo(\n  ({\n    card: {\n      type,\n      attributes: { title, rooms, address, area, unit },\n      relationships: { type: agent, id: agentId, attributes: name },\n      id,\n    },\n  }) => {\n    const dictUnit =\n      (dict.unit[unit] &&\n        (Array.isArray(dict.unit[unit])\n          ? ' ' + dict.unit[unit][0]\n          : ' ' + dict.unit[unit])) ||\n      '';\n\n    const dimension =\n      dictUnit && Array.isArray(dict.unit[unit]) ? dict.unit[unit][1] : '';\n\n    const [isLiked, setIsLiked] = React.useState(false);\n    const [isHovered, setIsHovered] = React.useState(false);\n\n    function handleLikeClick() {\n      // optimistic ui\n      setIsLiked(!isLiked);\n\n      api\n        .setFlatLikedStatus(id, !isLiked)\n        .then((data) => {\n          setIsLiked(data.response.liked);\n        })\n        .catch((e) => handleError(e));\n    }\n\n    function handleMouseOver() {\n      setIsHovered(true);\n    }\n\n    function handleMouseLeave() {\n      setIsHovered(false);\n    }\n\n    return (\n      <article className={isHovered ? 'card card_hovered' : 'card'}>\n        <div className=\"card__top-block card__section\">\n          <p className=\"card__tag card__tag_top\">{dict.type[type]}</p>\n          <BookmarkIcon isLiked={isLiked} onClick={handleLikeClick} />\n        </div>\n        <Link\n          className=\"link-wrapper card__link-wrapper  card__section\"\n          to={`/flats/${id}`}\n          onMouseLeave={handleMouseLeave}\n          onMouseOver={handleMouseOver}\n        >\n          <h2 className=\"card__title\">{title}</h2>\n          <p className=\"card__info\">\n            {`${rooms} ${getWordForm('комната', rooms)}`}\n            <span className=\"card__divider\">|</span>\n            {`${area}${dictUnit}`}\n            {dimension && <sup>{dimension}</sup>}\n          </p>\n          <p className=\"card__text\">{getAddresString(address)}</p>\n        </Link>\n        <div className=\"card__section\">\n          <p className=\"card__tag\">{dict.agent[agent]}</p>\n          <Link\n            to={`/users/${agentId}`}\n            className=\"card__text card__text_type_link\"\n          >\n            {getNameString(name)}\n          </Link>\n        </div>\n      </article>\n    );\n  }\n);\n\nexport default Card;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst CapPage = React.memo(\n  ({ caption = 'Страница не найдена', showLink = true, children }) => {\n    return (\n      <section className=\"section section_type_cap\">\n        <h2 className=\"section__cap\">{caption}</h2>\n        {children}\n        {showLink && (\n          <Link className=\"section__link\" to=\"/\">\n            Вернуться на главную\n          </Link>\n        )}\n      </section>\n    );\n  }\n);\n\nexport default CapPage;\n","import React from 'react';\nimport Card from './Card';\nimport CapPage from './CapPage';\nimport api from '../utils/api';\nimport { handleError } from '../utils/utils';\n\nfunction Flats() {\n  const [flats, setFlats] = React.useState();\n\n  React.useEffect(() => {\n    api\n      .getFlats()\n      .then((data) => setFlats(data.response))\n      .catch((e) => {\n        handleError(e);\n        setFlats(0);\n      });\n  }, []);\n\n  if (flats) {\n    return (\n      <section className=\"cards section page__section\">\n        <ul className=\"cards__list\">\n          {flats.map((flat) => (\n            <li className=\"cards__list-item\" key={flat.id}>\n              <Card card={flat} />\n            </li>\n          ))}\n        </ul>\n      </section>\n    );\n  }\n\n  if (Array.isArray(flats)) {\n    return <CapPage caption=\"Квартир нет :(\" showLink={false} />;\n  }\n\n  if (flats === 0) {\n    return (\n      <CapPage caption=\"Что-то пошло не так :(\" showLink={false}>\n        <p className=\"section__subtitle\">Мы уже разбираемся.</p>\n      </CapPage>\n    );\n  }\n\n  return (\n    <section className=\"cards section page__section\">\n      <ul className=\"cards__list\">\n        <li className=\"cards__list-item\">\n          <div className=\"card card_type_cap cards__loading\" />\n        </li>\n        <li className=\"cards__list-item\">\n          <div className=\"card card_type_cap cards__loading\" />\n        </li>\n        <li className=\"cards__list-item\">\n          <div className=\"card card_type_cap cards__loading\" />\n        </li>\n      </ul>\n    </section>\n  );\n}\n\nexport default Flats;\n","import React from 'react';\nimport Flats from './Flats';\nimport CapPage from './CapPage';\nimport { Route, Switch } from 'react-router-dom';\n\nconst Main = React.memo(() => {\n  return (\n    <main className=\"container\">\n      <Switch>\n        <Route exact path=\"/\">\n          <Flats />\n        </Route>\n        <Route path=\"/flats/:id\">\n          <CapPage caption=\"Страница в разработке\" />\n        </Route>\n        <Route path=\"/users/:id\">\n          <CapPage caption=\"Страница в разработке\" />\n        </Route>\n        <Route path=\"*\">\n          <CapPage />\n        </Route>\n      </Switch>\n    </main>\n  );\n});\n\nexport default Main;\n","import React from 'react';\n\nfunction Footer() {\n  const year = new Date().getFullYear();\n  const tag = year - 2020 ? `—${year}` : '';\n  return (\n    <footer className=\"footer page__footer container\">{`© 2020${tag}`}</footer>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\n\nfunction App() {\n  return (\n    <>\n      <Header />\n      <Main />\n      <Footer />\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}